### 1.笔记内容

这里面包含了路由的定义。InitRouter方法传入了两个参数，第一个参数是我们封装的chttp Server，第二参数是Service对象，从导入的路径也可以看出Service对象是在internal目录下的，也就是我们的业务代码，所有的业务代码都在Service下处理和编码

为了在handler包中方便引用Service，所以定义了一个全局变量svc，并且在 InitRouter 中进行了赋值，这样就能在handler包中全局的使用 svc 全局变量来调用 Service 中的业务方法。

以上两段Go语言代码用于定义和处理Web服务的路由。首先，我们需要了解什么是路由以及它在Web开发中的作用。

### 2.什么是路由？
在Web开发中，路由是一种机制，用于将客户端的请求（如URL和HTTP方法）映射到服务器上的特定处理函数上。路由帮助服务器根据不同的URL和HTTP方法执行不同的逻辑处理。

### 3.初始化路由
```go
package handler

import (
	"rose/common/net/chttp"
	"rose/internal/service"
)

var svc *service.Service

func InitRouter(s *chttp.Server, service *service.Service) {
	svc = service

	g := s.Group("/v1")
	ug := g.Group("/user")
	{
		ug.GET("/detail", userDetail)
	}
}
```
1. `svc` 是 `service.Service` 类型的全局变量，用于在路由处理函数中调用服务层。
2. `InitRouter` 函数接受一个 `chttp.Server` 和一个 `service.Service` 实例作为参数，设置全局服务实例。
3. 创建一个路由分组 `g` 对应于API版本 `/v1`。
4. 在此分组下创建另一个分组 `ug` 对应于 `/user` 路径。
5. 定义一个GET请求的路由 `/detail`，当访问 `/v1/user/detail` 时，将调用 `userDetail` 函数处理请求。

#### 3.1 补充知识
通过定义多级路由组，来组织和管理不同的HTTP请求。这种方式有助于逻辑上分组相似的服务，并使URL的结构清晰，便于维护和扩展。下面我将详细解释为什么需要定义这些路由路径，以及 `GET` 方法的具体作用和参数的意义。

- **为什么定义三个路由路径？**
1. **`/v1`** - 这是一个版本号，用于API版本控制。在实际的API设计中，引入版本号可以帮助在未来对API进行改进而不会破坏现有的应用程序，因为客户端可以根据版本号选择使用不同版本的API。这是一种常见的实践，可以保证API的向后兼容性。

2. **`/user`** - 这是一个资源标识符，指明这一组路由处理的是与“用户”相关的请求。这种分组可以将所有处理用户数据的API放在一起，例如用户的创建、检索、更新和删除（CRUD操作）。这不仅使得路由结构更清晰，也方便在权限管理系统中进行管理，因为相似的操作往往有类似的权限要求。

3. **`/detail`** - 这是一个具体的操作，指明这个路由是用来获取用户的详细信息。通常，RESTful API会使用资源的名词加上HTTP方法来明确操作的意图，如GET用于获取资源。

- **`GET` 方法的具体作用和参数**

    在Gin框架中，`GET` 方法是用来定义处理HTTP GET请求的路由和处理函数的。GET请求通常用于请求读取服务器上的数据，而不改变它的状态。这里的 `GET` 方法在代码中的使用如下：

1. **第一个参数 ("/detail")** 是路由路径。它指定了当客户端发起到这个路径的GET请求时应该执行关联的处理函数。
2. **第二个参数 (userDetail)** 是当这个路由被请求时将要调用的函数。在这个例子中，`userDetail` 是一个定义在其他部分的Go函数，负责处理获取用户详细信息的逻辑。

- **参数的意义**
1. **路由路径 ("/detail")**：这定义了客户端需要请求的URI端点。它是基于前面定义的分组（`/v1/user`），所以完整的请求URL会是 `/v1/user/detail`。
2. **处理函数 (userDetail)**：这是一个回调函数，当路由匹配到请求时被Gin框架调用。这个函数负责实际的业务逻辑，如访问数据库获取用户信息，并响应请求。

通过这种方式，Gin框架使得HTTP服务的路由管理变得直观和易于维护。每个路由清晰地定义了它应该处理的HTTP方法和请求路径，以及对应的处理逻辑，使得开发和查错过程中能够快速定位相关代码。

